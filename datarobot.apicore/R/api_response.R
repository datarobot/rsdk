# Copyright 2021 DataRobot, Inc. and its affiliates.
#
# All rights reserved.
#
# DataRobot, Inc.
#
# This is proprietary source code of DataRobot, Inc. and its
# affiliates.

# Public API
#
# DataRobot's Public facing API
#
# The version of the OpenAPI document: 2.28.0
# Contact: api-maintainer@datarobot.com
# Generated by: https://openapi-generator.tech

#' @docType class
#' @title ApiResponse
#' @description ApiResponse Class
#' @format An `R6Class` generator object
#' @export
ApiResponse <- R6::R6Class(
  "ApiResponse",
  public = list(
    #' @field content The deserialized response body.
    content = NULL,
    #' @field response The raw response from the endpoint.
    response = NULL,
    #' @field error The error response message extracted from the response.
    error = NULL,
    #' @param content The deserialized response body.
    #' @param response The raw response from the endpoint, rendered as an [httr::response].
    initialize = function(content, response) {
      self$content <- content
      self$response <- response
      status_code <- httr::status_code(response)
      if (status_code > 299) {
        self$error <- paste(status_code, httr::content(response)$message)
        if (interactive()) {
          print(
            paste("Error occurred with response status code:", status_code, "Error message:", self$error, "See $response for more information.")
          )
        }
      }
    }
  )
)
