# Copyright 2021-2022 DataRobot, Inc. and its affiliates.
#
# All rights reserved.
#
# DataRobot, Inc.
#
# This is proprietary source code of DataRobot, Inc. and its
# affiliates.

# Public API
#
# DataRobot's Public facing API
#
# The version of the OpenAPI document: 2.29.0
# Contact: api-maintainer@datarobot.com
# Generated by: https://openapi-generator.tech

#' @docType class
#' @title ExternalTSBaselinePayload
#'
#' @description ExternalTSBaselinePayload Class
#'
#' @format An \code{R6Class} generator object
#'
#' @field backtests  list( \link{Backtests} ) [optional] An array of the configured backtests.
#'
#' @field catalogVersionId  character The version id of the external baseline data item in the AI catalog.
#'
#' @field datetimePartitionColumn  character The date column that will be used as the datetime partition column for the specified project.
#'
#' @field forecastWindowEnd  integer For time series projects only. How many timeUnits of the datetimePartitionColumn into the future relative to the forecast point the forecast window should end.
#'
#' @field forecastWindowStart  integer For time series projects only. How many timeUnits of the datetimePartitionColumn into the future relative to the forecast point the forecast window should start.
#'
#' @field holdoutEndDate  character [optional] The end date of holdout scoring data.
#'
#' @field holdoutStartDate  character [optional] The start date of holdout scoring data.
#'
#' @field multiseriesIdColumns  list( character ) [optional] An array of column names identifying the multiseries ID column(s)to use to identify series within the data. Must match the multiseries ID column(s) for the specified project. Currently, only one multiseries ID column may be specified.
#'
#' @field target  character The selected target of the specified project.
#'
#' @importFrom R6 R6Class
#' @importFrom jsonlite fromJSON toJSON
#' @export
ExternalTSBaselinePayload <- R6::R6Class(
  "ExternalTSBaselinePayload",
  lock_objects = FALSE,
  private = list(
    # @description The properties of this object that are required to be set.
    # @description A helper function to handle assist with type validation. This function will validate class parameters with definite
    # types assigned to them, as well as handling validation of parameters with anyOf and oneOf types listed. These types
    # can themselves be other R6 objects.
    validateProps = function(`backtests` = NULL, `catalogVersionId` = NULL, `datetimePartitionColumn` = NULL, `forecastWindowEnd` = NULL, `forecastWindowStart` = NULL, `holdoutEndDate` = NULL, `holdoutStartDate` = NULL, `multiseriesIdColumns` = NULL, `target` = NULL) {
      if (!is.null(`catalogVersionId`)) {
        stopifnot(is.character(`catalogVersionId`), length(`catalogVersionId`) == 1)
      }
      if (!is.null(`datetimePartitionColumn`)) {
        stopifnot(is.character(`datetimePartitionColumn`), length(`datetimePartitionColumn`) == 1)
      }
      if (!is.null(`forecastWindowEnd`)) {
        stopifnot(is.numeric(`forecastWindowEnd`), length(`forecastWindowEnd`) == 1)
      }
      if (!is.null(`forecastWindowStart`)) {
        stopifnot(is.numeric(`forecastWindowStart`), length(`forecastWindowStart`) == 1)
      }
      if (!is.null(`target`)) {
        stopifnot(is.character(`target`), length(`target`) == 1)
      }
      if (!is.null(`backtests`)) {
        stopifnot(is.vector(`backtests`))
      }
      if (!is.null(`holdoutEndDate`)) {
        stopifnot(inherits(`holdoutEndDate`, "POSIXt"))
      }
      if (!is.null(`holdoutStartDate`)) {
        stopifnot(inherits(`holdoutStartDate`, "POSIXt"))
      }
      if (!is.null(`multiseriesIdColumns`)) {
        stopifnot(is.vector(`multiseriesIdColumns`))
      }
    }
  ),
  public = list(
    `backtests` = NULL,
    `catalogVersionId` = NULL,
    `datetimePartitionColumn` = NULL,
    `forecastWindowEnd` = NULL,
    `forecastWindowStart` = NULL,
    `holdoutEndDate` = NULL,
    `holdoutStartDate` = NULL,
    `multiseriesIdColumns` = NULL,
    `target` = NULL,
    #' @description A function used to initialize an instance of this class.
    #' @param backtests An array of the configured backtests.
    #' @param catalogVersionId The version id of the external baseline data item in the AI catalog.
    #' @param datetimePartitionColumn The date column that will be used as the datetime partition column for the specified project.
    #' @param forecastWindowEnd For time series projects only. How many timeUnits of the datetimePartitionColumn into the future relative to the forecast point the forecast window should end.
    #' @param forecastWindowStart For time series projects only. How many timeUnits of the datetimePartitionColumn into the future relative to the forecast point the forecast window should start.
    #' @param holdoutEndDate The end date of holdout scoring data.
    #' @param holdoutStartDate The start date of holdout scoring data.
    #' @param multiseriesIdColumns An array of column names identifying the multiseries ID column(s)to use to identify series within the data. Must match the multiseries ID column(s) for the specified project. Currently, only one multiseries ID column may be specified.
    #' @param target The selected target of the specified project.
    #' @param validateParams An optional param for auto validating this object's parameters before initialization. Default FALSE.
    #' @param ... Any additional keyword arguments to be passed into this object for initialization.
    initialize = function(`catalogVersionId` = NULL, `datetimePartitionColumn` = NULL, `forecastWindowEnd` = NULL, `forecastWindowStart` = NULL, `target` = NULL, `backtests` = NULL, `holdoutEndDate` = NULL, `holdoutStartDate` = NULL, `multiseriesIdColumns` = NULL, validateParams = FALSE, ...) {
      local.optional.var <- list(...)
      if (validateParams) {
        lapply(list(`catalogVersionId`, `datetimePartitionColumn`, `forecastWindowEnd`, `forecastWindowStart`, `target`), function(param) {
          stopifnot("Required param not set." = !is.null(param))
        })
        private$validateProps(backtests, catalogVersionId, datetimePartitionColumn, forecastWindowEnd, forecastWindowStart, holdoutEndDate, holdoutStartDate, multiseriesIdColumns, target)
      }
      sapply(`backtests`, function(x) stopifnot(R6::is.R6(x)))
      self$`catalogVersionId` <- `catalogVersionId`
      self$`datetimePartitionColumn` <- `datetimePartitionColumn`
      self$`forecastWindowEnd` <- `forecastWindowEnd`
      self$`forecastWindowStart` <- `forecastWindowStart`
      self$`holdoutEndDate` <- `holdoutEndDate`
      self$`holdoutStartDate` <- `holdoutStartDate`
      sapply(`multiseriesIdColumns`, function(x) stopifnot(is.character(x)))
      self$`target` <- `target`
    },
    #' @description A helper function that provides public access to the private validateProps function. This allows users the ability
    #' to programmatically validate objects before sending them to DataRobot.
    #' checking this objects set properties.
    validate = function() {
      do.call(private$validateProps, list(backtests = self$`backtests`, catalogVersionId = self$`catalogVersionId`, datetimePartitionColumn = self$`datetimePartitionColumn`, forecastWindowEnd = self$`forecastWindowEnd`, forecastWindowStart = self$`forecastWindowStart`, holdoutEndDate = self$`holdoutEndDate`, holdoutStartDate = self$`holdoutStartDate`, multiseriesIdColumns = self$`multiseriesIdColumns`, target = self$`target`))
    },
    #' @description A helper function that serializes this object into a JSON encoded string.
    toJSON = function() {
      jsoncontent <- c(
        if (!is.null(self$`backtests`)) {
          sprintf(
            '"backtests":
            [%s]
      ',
            paste(sapply(self$`backtests`, function(x) jsonlite::toJSON(x$toJSON(), auto_unbox = TRUE, digits = NA)), collapse = ",")
          )
        },
        if (!is.null(self$`catalogVersionId`)) {
          sprintf(
            '"catalogVersionId":
            "%s"
                  ',
            self$`catalogVersionId`
          )
        },
        if (!is.null(self$`datetimePartitionColumn`)) {
          sprintf(
            '"datetimePartitionColumn":
            "%s"
                  ',
            self$`datetimePartitionColumn`
          )
        },
        if (!is.null(self$`forecastWindowEnd`)) {
          sprintf(
            '"forecastWindowEnd":
            %d
                  ',
            self$`forecastWindowEnd`
          )
        },
        if (!is.null(self$`forecastWindowStart`)) {
          sprintf(
            '"forecastWindowStart":
            %d
                  ',
            self$`forecastWindowStart`
          )
        },
        if (!is.null(self$`holdoutEndDate`)) {
          sprintf(
            '"holdoutEndDate":
            "%s"
                  ',
            format(self$`holdoutEndDate`, format = "%Y-%m-%dT%H:%M:%OSZ", tz = "UTC")
          )
        },
        if (!is.null(self$`holdoutStartDate`)) {
          sprintf(
            '"holdoutStartDate":
            "%s"
                  ',
            format(self$`holdoutStartDate`, format = "%Y-%m-%dT%H:%M:%OSZ", tz = "UTC")
          )
        },
        if (!is.null(self$`multiseriesIdColumns`)) {
          sprintf(
            '"multiseriesIdColumns":
            [%s]
                  ',
            paste(unlist(lapply(self$`multiseriesIdColumns`, function(x) paste0('"', x, '"'))), collapse = ",")
          )
        },
        if (!is.null(self$`target`)) {
          sprintf(
            '"target":
            "%s"
                  ',
            self$`target`
          )
        }
      )
      jsoncontent <- paste(jsoncontent, collapse = ",")
      paste("{", jsoncontent, "}", sep = "")
    },
    #' @description A helper function that deserializes a JSON string into an instance of this class.
    #' @param ExternalTSBaselinePayloadJson A JSON encoded string representation of a class instance.
    #' @param validateParams An optional param for auto validating this object's parameters after deserialization. Default FALSE.
    fromJSON = function(ExternalTSBaselinePayloadJson, validateParams = FALSE) {
      ExternalTSBaselinePayloadObject <- jsonlite::fromJSON(ExternalTSBaselinePayloadJson)
      self$`backtests` <- ApiClient$new()$deserializeObj(ExternalTSBaselinePayloadObject$`backtests`, "array[Backtests]", loadNamespace("datarobot.apicore"))
      self$`catalogVersionId` <- ExternalTSBaselinePayloadObject$`catalogVersionId`
      self$`datetimePartitionColumn` <- ExternalTSBaselinePayloadObject$`datetimePartitionColumn`
      self$`forecastWindowEnd` <- ExternalTSBaselinePayloadObject$`forecastWindowEnd`
      self$`forecastWindowStart` <- ExternalTSBaselinePayloadObject$`forecastWindowStart`
      self$`holdoutEndDate` <- ParseRFC3339Timestamp(ExternalTSBaselinePayloadObject$`holdoutEndDate`)
      self$`holdoutStartDate` <- ParseRFC3339Timestamp(ExternalTSBaselinePayloadObject$`holdoutStartDate`)
      self$`multiseriesIdColumns` <- ApiClient$new()$deserializeObj(ExternalTSBaselinePayloadObject$`multiseriesIdColumns`, "array[character]", loadNamespace("datarobot.apicore"))
      self$`target` <- ExternalTSBaselinePayloadObject$`target`

      if (validateParams) {
        self$validate()
      }

      return(self)
    }
  )
)
